<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hiri.ai Birleştirilmiş Kurumsal Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap");

      /* GENEL STİLLER */
      body {
        font-family: "Inter", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background-color: #f8fafc;
        color: #1e293b;
      }

      /* KAYDIRMA ÇUBUĞU */
      ::-webkit-scrollbar {
        width: 6px;
        height: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #e2e8f0;
        border-radius: 3px;
      }
      ::-webkit-scrollbar-thumb {
        background: #94a3b8;
        border-radius: 3px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }

      /* RENK & STİL DEĞİŞKENLERİ */
      :root {
        --hiri-purple: #7c3aed;
        --hiri-purple-dark: #6d28d9;
        --hiri-blue: #3b82f6;
        --hiri-pink: #ec4899;
        --hiri-text-primary: #1e293b;
        --hiri-text-secondary: #475569;
        --hiri-border-color: #cbd5e1;
        --hiri-border-color-light: #eaecf0;
      }

      /* BİRLEŞTİRİLMİŞ BUTON STİLLERİ */
      .hiri-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        padding: 0.65rem 1.3rem;
        border-radius: 0.5rem;
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid transparent;
        box-shadow: 0 1px 2px 0 rgba(16, 24, 40, 0.05);
      }

      .hiri-button-primary {
        background-color: var(--hiri-purple);
        color: white;
      }
      .hiri-button-primary:hover {
        background-color: var(--hiri-purple-dark);
        transform: translateY(-2px);
        box-shadow: 0 8px 16px -4px rgba(124, 58, 237, 0.35),
          0 4px 8px -4px rgba(124, 58, 237, 0.25);
      }

      .hiri-button-secondary {
        background-color: #f3e8ff;
        color: var(--hiri-purple);
        border-color: #d8b4fe;
      }
      .hiri-button-secondary:hover {
        background-color: #e9d5ff;
        border-color: var(--hiri-purple);
        transform: translateY(-1px);
      }

      .hiri-button-outline {
        background-color: #ffffff;
        color: var(--hiri-text-secondary);
        border-color: var(--hiri-border-color);
      }
      .hiri-button-outline:hover {
        background-color: #f9fafb;
        color: var(--hiri-text-primary);
      }

      .hiri-button-tertiary {
        background-color: transparent;
        color: var(--hiri-text-secondary);
      }
      .hiri-button-tertiary:hover {
        background-color: #f9fafb;
      }

      /* KART & GİRDİ STİLLERİ */
      .hiri-card {
        background-color: white;
        border-radius: 0.75rem;
        padding: 2rem;
        box-shadow: 0 4px 12px -1px rgba(0, 0, 0, 0.05),
          0 2px 8px -1px rgba(0, 0, 0, 0.03);
        border: 1px solid #e5e7eb;
      }

      .hiri-input {
        border: 1px solid var(--hiri-border-color);
        border-radius: 0.5rem;
        padding: 0.75rem 0.9rem;
        width: 100%;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
        font-size: 0.9rem;
        background-color: #f9fafb;
      }
      .hiri-input:focus {
        outline: none;
        border-color: var(--hiri-purple);
        box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
        background-color: #fff;
      }
      .hiri-input[readonly] {
        background-color: #e5e7eb;
        cursor: not-allowed;
      }

      /* MODAL STİLLERİ */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(30, 41, 59, 0.8);
        backdrop-filter: blur(4px);
      }
      .modal.is-open {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background-color: #fff;
        margin: auto;
        padding: 28px 38px;
        border: none;
        width: 90%;
        max-width: 900px;
        border-radius: 0.75rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.3);
        position: relative;
        animation: fadeInModal 0.3s ease-out;
      }
      @keyframes fadeInModal {
        from {
          opacity: 0;
          transform: translateY(-25px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      .close-button {
        color: #9ca3af;
        position: absolute;
        top: 20px;
        right: 28px;
        font-size: 28px;
        font-weight: bold;
        transition: color 0.2s ease;
        cursor: pointer;
      }
      .close-button:hover,
      .close-button:focus {
        color: var(--hiri-text-primary);
        text-decoration: none;
      }

      /* SEKME STİLLERİ */
      .tab-button {
        padding: 0.85rem 1.2rem;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        margin-right: 0.6rem;
        font-weight: 600;
        color: var(--hiri-text-secondary);
        transition: all 0.2s ease;
      }
      .tab-button.active {
        border-bottom-color: var(--hiri-purple);
        color: var(--hiri-purple);
      }

      /* AKORDİYON STİLLERİ */
      .accordion-header {
        cursor: pointer;
        padding: 1rem 1.5rem;
        background-color: #f8fafc;
        border-radius: 0.5rem;
        font-weight: 600;
        transition: background-color 0.2s;
        border: 1px solid #e5e7eb;
      }
      .accordion-header:hover {
        background-color: #f1f5f9;
      }
      .accordion-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.4s ease-out, padding 0.4s ease-out;
        background-color: #ffffff;
        border-radius: 0 0 0.5rem 0.5rem;
        border: 1px solid #e5e7eb;
        border-top: none;
      }
      .accordion-content.open {
        max-height: 800px;
        padding: 1.5rem;
      }

      /* LOG & CHAT STİLLERİ */
      .log-item {
        display: flex;
        align-items: flex-start;
        padding: 0.75rem 0;
        border-bottom: 1px solid #f1f5f9;
      }
      .log-item:last-child {
        border-bottom: none;
      }
      .log-icon {
        flex-shrink: 0;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
      }
      .chat-message {
        padding: 0.7rem 1rem;
        border-radius: 1.25rem;
        margin-bottom: 0.6rem;
        max-width: 80%;
        word-wrap: break-word;
        font-size: 0.9rem;
        line-height: 1.6;
      }
      .chat-message.user {
        background: linear-gradient(
          135deg,
          var(--hiri-purple),
          var(--hiri-blue)
        );
        color: white;
        margin-left: auto;
        border-bottom-right-radius: 0.375rem;
      }
      .chat-message.assistant {
        background-color: #e9eff6;
        color: var(--hiri-text-primary);
        margin-right: auto;
        border-bottom-left-radius: 0.375rem;
      }
      .chat-suggestion-button {
        background-color: #f9fafb;
        border: 1px solid #f3f4f6;
        color: #4b5563;
        font-size: 0.8rem;
        padding: 0.5rem 0.9rem;
        border-radius: 1rem;
        cursor: pointer;
        transition: all 0.2s;
      }
      .chat-suggestion-button:hover {
        background-color: #f3e8ff;
        border-color: #d8b4fe;
        color: var(--hiri-purple);
      }

      /* ÇEŞİTLİ & YARDIMCI STİLLER */
      .hiri-gradient-header {
        background: linear-gradient(
          110deg,
          var(--hiri-purple) 0%,
          var(--hiri-blue) 60%,
          var(--hiri-pink) 100%
        );
      }
      .tooltip {
        position: relative;
        display: inline-block;
      }
      .tooltip .tooltiptext {
        visibility: hidden;
        width: 250px;
        background-color: #1f2937;
        color: #fff;
        text-align: left;
        border-radius: 0.375rem;
        padding: 10px 14px;
        position: absolute;
        z-index: 10;
        bottom: 135%;
        left: 50%;
        margin-left: -125px;
        opacity: 0;
        transition: opacity 0.25s ease;
        font-size: 0.8rem;
        line-height: 1.5;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
      }
      .tooltip .tooltiptext::after {
        content: "";
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -6px;
        border-width: 6px;
        border-style: solid;
        border-color: #1f2937 transparent transparent transparent;
      }
      .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
      }
      .sticky-note {
        background-color: #fffbeb;
        color: #78350f;
        padding: 0.85rem 1rem;
        border-radius: 0.5rem;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.06);
        border-left: 5px solid #f59e0b;
        font-size: 0.8rem;
      }
      .gemini-chat-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.3rem 0.5rem;
        border-radius: 0.375rem;
        color: var(--hiri-purple);
        transition: background-color 0.2s ease;
      }
      .gemini-chat-icon:hover {
        background-color: #f3e8ff;
      }
      .gemini-chat-icon .fa-solid {
        filter: drop-shadow(0 0 2px var(--hiri-pink));
        font-size: 1.1em;
      }
      .report-section-title {
        font-size: 1.125rem;
        font-weight: 700;
        color: var(--hiri-purple);
        margin-bottom: 0.75rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--hiri-purple-dark);
      }
      .report-subsection-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--hiri-text-primary);
        margin-top: 1rem;
        margin-bottom: 0.5rem;
      }

      /* ON-DEMAND MÜLAKAT ÖZEL STİLLERİ */
      .type-selector-card {
        border: 2px solid var(--hiri-border-color-light);
        padding: 1rem;
        border-radius: 0.75rem;
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
      }
      .type-selector-card.active {
        border-color: var(--hiri-purple);
        background-color: #f9f5ff;
      }
      .type-selector-card .icon {
        background-color: #f9f5ff;
        border: 1px solid #f9f5ff;
        width: 40px;
        height: 40px;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        color: var(--hiri-purple);
        transition: all 0.2s;
      }
      .type-selector-card.active .icon {
        background-color: var(--hiri-purple);
        color: white;
      }
      .live-preview {
        background: #232a3b;
        border-radius: 1.25rem;
        padding: 0.75rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        height: 100%;
        display: flex;
        flex-direction: column;
      }
      .live-preview-screen {
        background: linear-gradient(135deg, #ffffff, #f9fafb);
        border-radius: 0.75rem;
        flex-grow: 1;
        padding: 1.5rem;
        overflow-y: auto;
      }
      .sortable-ghost {
        background: #f3e8ff;
        border: 2px dashed var(--hiri-purple);
        opacity: 0.7;
      }
      .question-settings {
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s ease-in-out;
      }
      .question-settings.open {
        max-height: 200px;
        padding-top: 0.75rem;
      }
    </style>
  </head>
  <body class="bg-slate-100 text-slate-800">
    <!-- GİRİŞ EKRANI -->
    <div
      id="loginView"
      class="min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-purple-700 via-indigo-600 to-pink-500 p-4"
    >
      <div class="w-full max-w-sm">
        <div class="text-center mb-10">
          <img
            src="https://placehold.co/200x70/FFFFFF/FFFFFF?text=Hiri&font=pacifico"
            alt="Hiri Logosu"
            class="mx-auto h-16"
          />
        </div>
        <div class="bg-white/90 backdrop-blur-md shadow-2xl rounded-xl p-8">
          <h2 class="text-3xl font-extrabold text-center text-slate-700 mb-8">
            Portala Giriş
          </h2>
          <form id="loginForm">
            <div class="mb-5">
              <label
                for="email"
                class="block text-sm font-semibold text-slate-600 mb-1.5"
                >Email</label
              >
              <input
                type="email"
                id="email"
                value="test@hiri.ai"
                class="hiri-input bg-white/70"
                placeholder="E-posta adresiniz"
              />
            </div>
            <div class="mb-8">
              <label
                for="password"
                class="block text-sm font-semibold text-slate-600 mb-1.5"
                >Şifre</label
              >
              <input
                type="password"
                id="password"
                value="password"
                class="hiri-input bg-white/70"
                placeholder="Şifreniz"
              />
            </div>
            <button
              type="submit"
              class="hiri-button hiri-button-primary w-full text-base py-2.5"
            >
              Giriş Yap
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ANA UYGULAMA EKRANI -->
    <div id="appView" class="hidden flex flex-col min-h-screen">
      <header
        class="hiri-gradient-header text-white shadow-md sticky top-0 z-50"
      >
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex items-center justify-between h-16">
            <div class="flex items-center">
              <img
                src="https://placehold.co/130x40/FFFFFF/FFFFFF?text=Hiri&font=pacifico"
                alt="Hiri Logosu"
                class="h-10"
              />
              <nav class="hidden md:flex space-x-2 ml-10">
                <a
                  href="#"
                  id="navDashboard"
                  class="px-3 py-2 rounded-md text-sm font-medium hover:bg-white/20 transition-colors"
                  >Anasayfa</a
                >
                <a
                  href="#"
                  id="navAdaylar"
                  class="px-3 py-2 rounded-md text-sm font-medium hover:bg-white/20 transition-colors"
                  >Adaylar</a
                >
                <a
                  href="#"
                  id="navPozisyonlar"
                  class="px-3 py-2 rounded-md text-sm font-medium hover:bg-white/20 transition-colors"
                  >Pozisyonlar</a
                >
              </nav>
            </div>
            <div class="flex items-center space-x-4">
              <span
                class="text-sm font-semibold hidden sm:inline"
                id="userCompanyName"
              ></span>
              <div class="relative">
                <button
                  id="userMenuButton"
                  class="h-9 w-9 rounded-full bg-white/30 text-white flex items-center justify-center text-sm font-bold hover:bg-white/40 transition-colors"
                ></button>
                <div
                  id="userMenuDropdown"
                  class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-xl z-20 py-1"
                >
                  <a
                    href="#"
                    id="navUserProfile"
                    class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100"
                    >Profilim</a
                  >
                  <a
                    href="#"
                    id="navBilgiBankasi"
                    class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100"
                    >Bilgi Bankası</a
                  >
                  <a
                    href="#"
                    id="logoutButton"
                    class="block px-4 py-2 text-sm text-slate-700 hover:bg-slate-100 border-t mt-1 pt-2"
                    >Çıkış Yap</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container mx-auto p-4 sm:p-6 lg:p-8 flex-grow">
        <!-- ANASAYFA (DASHBOARD) EKRANI -->
        <div id="dashboardView" class="hidden space-y-6">
          <h1 class="text-3xl font-bold text-slate-800">
            Hoş Geldiniz, <span id="dashboardCompanyName"></span>!
          </h1>
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2 space-y-6">
              <div
                class="bg-white rounded-xl shadow-sm border p-8 flex flex-col items-center justify-center text-center min-h-[480px]"
              >
                <div class="bg-purple-100 rounded-full p-4 mb-4">
                  <div class="bg-purple-200 rounded-full p-2">
                    <i class="fas fa-robot text-4xl text-purple-600"></i>
                  </div>
                </div>
                <h2 class="text-2xl font-bold text-slate-800">Hiri Bot</h2>
                <p class="text-slate-500 mb-6">
                  CV analizi veya diğer işlemler için bir soru sorun...
                </p>
                <div class="w-full max-w-xl relative mb-6">
                  <input
                    type="text"
                    id="dashboardChatInput"
                    class="hiri-input text-base pl-12 pr-28"
                    placeholder="Örn: En uygun 5 adayı listele..."
                  />
                  <i
                    class="fas fa-search text-slate-400 absolute left-4 top-1/2 -translate-y-1/2"
                  ></i>
                  <button
                    id="dashboardChatSend"
                    class="hiri-button hiri-button-primary absolute right-1.5 top-1/2 -translate-y-1/2 text-sm py-2 px-4"
                  >
                    Gönder
                  </button>
                </div>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div
                  class="hiri-card flex flex-col items-center justify-center p-6 text-center hover:shadow-lg"
                >
                  <i class="fas fa-users text-5xl text-purple-600 mb-4"></i>
                  <h2 class="text-lg font-semibold text-slate-700 mb-1">
                    Aday Yönetimi
                  </h2>
                  <button
                    id="goToAdaylarButton"
                    class="hiri-button hiri-button-primary text-sm px-6 py-2"
                  >
                    Adaylara Git
                  </button>
                </div>
                <div
                  class="hiri-card flex flex-col items-center justify-center p-6 text-center hover:shadow-lg"
                >
                  <i class="fas fa-briefcase text-5xl text-blue-500 mb-4"></i>
                  <h2 class="text-lg font-semibold text-slate-700 mb-1">
                    Pozisyon Yönetimi
                  </h2>
                  <button
                    id="goToPozisyonlarButtonDashboard"
                    class="hiri-button hiri-button-secondary text-sm px-6 py-2"
                  >
                    Pozisyonlara Git
                  </button>
                </div>
              </div>
            </div>
            <div class="lg:col-span-1 space-y-6">
              <div class="hiri-card">
                <h2 class="text-xl font-semibold text-slate-700 mb-3">
                  Yaklaşan Mülakatlar
                </h2>
                <div
                  id="yaklasanMulakatlarListesi"
                  class="space-y-3 max-h-60 overflow-y-auto"
                ></div>
              </div>
              <div class="hiri-card">
                <div class="flex justify-between items-center mb-3">
                  <h2 class="text-xl font-semibold text-slate-700">
                    Kişisel Notlarım
                  </h2>
                  <button
                    id="yeniNotEkleButton"
                    class="hiri-button hiri-button-secondary text-xs py-1 px-2"
                  >
                    <i class="fas fa-plus mr-1"></i>Yeni Not
                  </button>
                </div>
                <div
                  id="kisiselNotlarAlani"
                  class="space-y-2 max-h-48 overflow-y-auto"
                ></div>
              </div>
            </div>
          </div>
        </div>

        <!-- ADAY LİSTESİ EKRANI -->
        <div id="adayListView" class="hidden">
          <div
            class="flex flex-col sm:flex-row justify-between items-center mb-8"
          >
            <h1 class="text-3xl font-semibold text-slate-800 mb-4 sm:mb-0">
              Adaylar
            </h1>
            <button
              id="goToAdayOlusturButtonList"
              class="hiri-button hiri-button-primary text-sm py-2.5"
            >
              <i class="fas fa-user-plus mr-2"></i> Yeni Aday Oluştur
            </button>
          </div>
          <div class="hiri-card">
            <div
              class="flex flex-col sm:flex-row justify-between items-center mb-5 gap-4"
            >
              <input
                type="text"
                id="adaySearchInput"
                class="hiri-input sm:w-2/5 lg:w-1/3 text-sm"
                placeholder="Aday ara (isim, email, pozisyon)..."
              />
              <span class="text-sm text-slate-500"
                ><span id="adayListCount">0</span> Aday Gösteriliyor</span
              >
            </div>
            <div class="overflow-x-auto">
              <table class="min-w-full w-full divide-y divide-slate-200">
                <thead class="bg-slate-100">
                  <tr>
                    <th
                      class="px-5 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"
                    >
                      Ad Soyad
                    </th>
                    <th
                      class="px-5 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"
                    >
                      Email
                    </th>
                    <th
                      class="px-5 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"
                    >
                      Pozisyon
                    </th>
                    <th
                      class="px-5 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"
                    >
                      Uyumluluk
                    </th>
                    <th
                      class="px-5 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider w-40"
                    >
                      İşlemler
                    </th>
                  </tr>
                </thead>
                <tbody
                  id="adayListTableBody"
                  class="bg-white divide-y divide-slate-200"
                ></tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- POZİSYON LİSTESİ EKRANI -->
        <div id="pozisyonlarListView" class="hidden">
          <div
            class="flex flex-col sm:flex-row justify-between items-center mb-8"
          >
            <h1 class="text-3xl font-semibold text-slate-800 mb-4 sm:mb-0">
              Pozisyonlar
            </h1>
            <button
              id="goToPozisyonEkleButtonList"
              class="hiri-button hiri-button-primary text-sm py-2.5"
            >
              <i class="fas fa-plus-circle mr-2"></i> Yeni Pozisyon Ekle
            </button>
          </div>
          <div class="hiri-card">
            <div class="flex justify-between items-center mb-5">
              <input
                type="text"
                id="pozisyonSearchInput"
                class="hiri-input w-full sm:w-1/3 text-sm"
                placeholder="Pozisyon ara..."
              />
              <span class="text-sm text-slate-500"
                ><span id="pozisyonListCount">0</span> Pozisyon
                Gösteriliyor</span
              >
            </div>
            <div id="pozisyonListContainer" class="space-y-4"></div>
          </div>
        </div>

        <!-- POZİSYON OLUŞTURMA EKRANI -->
        <div id="pozisyonEkleView" class="hidden">
          <div class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-semibold text-slate-800">
              Yeni Pozisyon Ekle
            </h1>
            <button
              id="backToPozisyonListFromEkle"
              class="hiri-button hiri-button-secondary text-sm py-2"
            >
              <i class="fas fa-arrow-left mr-2"></i>Pozisyon Listesine Dön
            </button>
          </div>
          <div class="hiri-card max-w-3xl mx-auto">
            <form id="pozisyonEkleForm" class="space-y-5">
              <div>
                <label
                  for="pozisyonBasligi"
                  class="block text-sm font-medium text-slate-600"
                  >Pozisyon Başlığı*</label
                ><input
                  type="text"
                  id="pozisyonBasligi"
                  class="hiri-input mt-1 text-sm"
                  required
                />
              </div>
              <div>
                <label
                  for="pozisyonAciklamasi"
                  class="block text-sm font-medium text-slate-600"
                  >Pozisyon Açıklaması*</label
                ><textarea
                  id="pozisyonAciklamasi"
                  rows="15"
                  class="hiri-input mt-1 text-sm"
                  required
                ></textarea>
              </div>
              <button
                type="submit"
                class="hiri-button hiri-button-primary w-full py-3 text-base"
              >
                Pozisyonu Kaydet
              </button>
            </form>
          </div>
        </div>

        <!-- ADAY OLUŞTURMA EKRANI -->
        <div id="adayOlusturView" class="hidden">
          <div class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-semibold text-slate-800">
              Yeni Aday Oluştur
            </h1>
            <button
              id="backToAdayListFromOlustur"
              class="hiri-button hiri-button-secondary text-sm py-2"
            >
              <i class="fas fa-arrow-left mr-2"></i>Aday Listesine Dön
            </button>
          </div>
          <div class="hiri-card max-w-3xl mx-auto">
            <div class="mb-6 border-b border-slate-200">
              <button id="tabManuelGiris" class="tab-button active">
                Manuel</button
              ><button id="tabCVYukle" class="tab-button">CV Yükle</button>
            </div>
            <form id="adayOlusturFormManuel" class="space-y-5"></form>
            <form id="adayOlusturFormCV" class="hidden space-y-5"></form>
          </div>
        </div>

        <!-- ADAY PROFİL EKRANI -->
        <div id="adayProfilView" class="hidden space-y-6">
          <div
            class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2"
          >
            <div class="mb-4 sm:mb-0">
              <h1
                id="profilAdayAdSoyad"
                class="text-3xl font-bold text-slate-800"
              ></h1>
              <p id="profilAdayEmail" class="text-slate-500 text-sm"></p>
            </div>
            <div class="flex items-center gap-2">
              <button
                id="openUnifiedChatButton"
                class="hiri-button hiri-button-primary text-sm py-2"
              >
                <i class="fas fa-robot mr-2"></i> HiriBot ile Sohbet</button
              ><button
                id="shareProfileButton"
                class="hiri-button hiri-button-secondary text-sm py-2"
              >
                <i class="fas fa-share-alt mr-2"></i>Profili Paylaş</button
              ><button
                id="backToAdayListButton"
                class="hiri-button hiri-button-outline text-sm py-2"
              >
                <i class="fas fa-arrow-left mr-2"></i>Listeye Dön
              </button>
            </div>
          </div>
          <div class="hiri-card">
            <div class="mb-6 border-b border-slate-200">
              <button
                data-tab="genelBakis"
                class="tab-button profil-tab active"
              >
                Genel Bakış
              </button>
              <button data-tab="mulakatHazirligi" class="tab-button profil-tab">
                Mülakat Hazırlığı
              </button>
              <button data-tab="mulakatKayitlari" class="tab-button profil-tab">
                Mülakatlar
              </button>
            </div>
            <div
              id="tabContent_genelBakis"
              class="profil-tab-content grid grid-cols-1 lg:grid-cols-3 gap-8"
            >
              <div class="lg:col-span-2 space-y-6">
                <div>
                  <h2 class="text-xl font-semibold text-slate-700 mb-1">
                    Yapay Zeka CV Özeti
                  </h2>
                  <p
                    id="profilCvOzeti"
                    class="text-sm text-slate-600 bg-indigo-50 p-4 rounded-lg border border-indigo-200 leading-relaxed"
                  ></p>
                </div>
                <div>
                  <h2 class="text-xl font-semibold mb-2">
                    Yapay Zeka Kişilik Envanteri Özeti
                  </h2>
                  <div id="personalityInventorySection"></div>
                </div>
                <div>
                  <h2 class="text-xl font-semibold text-slate-700 mb-1">
                    Yüklenen CV
                  </h2>
                  <button
                    id="cvGoruntuleButton"
                    class="hiri-button hiri-button-secondary text-sm py-2"
                  >
                    <i class="fas fa-file-alt mr-2"></i>CV'yi Görüntüle
                  </button>
                </div>
              </div>
              <div class="space-y-5">
                <div>
                  <h2 class="text-xl font-semibold text-slate-700 mb-1">
                    Değerlendirildiği Pozisyon
                  </h2>
                  <p
                    id="profilDegerlendirilenPozisyon"
                    class="text-sm text-slate-600 font-medium bg-slate-100 p-3 rounded-md"
                  ></p>
                </div>
                <div>
                  <h2 class="text-xl font-semibold text-slate-700 mb-2">
                    Pozisyona Uyumluluk
                  </h2>
                  <div class="w-full bg-slate-200 rounded-full h-8 tooltip">
                    <div
                      id="profilUyumlulukSkoruBar"
                      class="bg-gradient-to-r from-purple-500 to-indigo-500 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white transition-all"
                    >
                      <span id="profilUyumlulukSkoruText"></span>
                    </div>
                    <span
                      id="compatibilityTooltipText"
                      class="tooltiptext"
                    ></span>
                  </div>
                </div>
              </div>
            </div>
            <div
              id="tabContent_mulakatHazirligi"
              class="profil-tab-content hidden space-y-5"
            >
              <div class="flex justify-between items-center">
                <h2 class="text-xl font-semibold text-slate-700">
                  Yapay Zeka Mülakat Soru Önerileri (STAR)
                </h2>
                <button
                  id="downloadSorularButton"
                  class="hiri-button hiri-button-secondary text-xs py-1.5 px-2.5"
                >
                  <i class="fas fa-download mr-1.5"></i>İndir
                </button>
              </div>
              <div
                id="mulakatSorulariAlani"
                class="grid grid-cols-1 md:grid-cols-2 gap-5"
              ></div>
            </div>
            <div
              id="tabContent_mulakatKayitlari"
              class="profil-tab-content hidden"
            >
              <div class="flex flex-wrap gap-3 mb-6">
                <button
                  id="createOnDemandInterviewButton"
                  class="hiri-button hiri-button-primary text-sm py-2"
                >
                  <i class="fas fa-video mr-2"></i>On-Demand Mülakat Oluştur</button
                ><button
                  id="hiriBotPlanliDavetButton"
                  class="hiri-button hiri-button-secondary text-sm py-2"
                >
                  <i class="fas fa-calendar-alt mr-2"></i>Planlı Mülakat</button
                ><button
                  id="disMulakatEkleButton"
                  class="hiri-button hiri-button-secondary text-sm py-2"
                >
                  <i class="fas fa-upload mr-2"></i>Dış Mülakat Ekle
                </button>
              </div>
              <h3 class="text-lg font-semibold text-slate-700 pt-4 border-t">
                Geçmiş Mülakatlar
              </h3>
              <div id="gecmisMulakatlarListesi" class="space-y-4 mt-4"></div>
            </div>
          </div>
          <div class="mt-8">
            <div
              id="notesLogsAccordionHeader"
              class="accordion-header flex justify-between items-center"
            >
              <span
                ><i class="fas fa-history mr-2 text-purple-600"></i>Notlar ve
                İşlem Geçmişi</span
              ><i
                id="accordionIcon"
                class="fas fa-chevron-down transition-transform"
              ></i>
            </div>
            <div id="notesLogsAccordionContent" class="accordion-content">
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div>
                  <h3 class="text-lg font-semibold mb-4 pb-2 border-b">
                    Aday Hakkındaki Notlar
                  </h3>
                  <div class="mb-4">
                    <textarea
                      id="newCandidateNote"
                      class="hiri-input text-sm"
                      rows="3"
                      placeholder="Yeni not..."
                    ></textarea
                    ><button
                      id="addCandidateNoteBtn"
                      class="hiri-button hiri-button-primary text-sm py-2 px-4 mt-2"
                    >
                      Kaydet
                    </button>
                  </div>
                  <div id="candidateNotesList" class="space-y-3"></div>
                </div>
                <div>
                  <h3 class="text-lg font-semibold mb-4 pb-2 border-b">
                    İşlem Geçmişi
                  </h3>
                  <div id="candidateLogsList" class="space-y-2"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- MÜLAKAT DAVET EKRANI -->
        <div id="mulakatDavetView" class="hidden">
          <div class="flex justify-between items-center mb-8">
            <h1
              id="mulakatDavetBaslik"
              class="text-3xl font-semibold text-slate-800"
            ></h1>
            <button
              id="backToProfilFromMulakatDavet"
              class="hiri-button hiri-button-secondary text-sm py-2"
            >
              <i class="fas fa-arrow-left mr-2"></i>Aday Profiline Dön
            </button>
          </div>
          <div class="hiri-card max-w-xl mx-auto">
            <form id="hiriBotMulakatForm" class="space-y-5">
              <input type="hidden" id="mulakatAdayId" /><input
                type="hidden"
                id="mulakatDavetTipi"
              />
              <div>
                <label
                  for="toplantiLinki"
                  class="block text-sm font-medium text-slate-600"
                  >Toplantı Linki*</label
                ><input
                  type="url"
                  id="toplantiLinki"
                  class="hiri-input mt-1"
                  required
                />
              </div>
              <div id="planliMulakatAlanlari" class="space-y-5">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
                  <div>
                    <label
                      for="mulakatTarihi"
                      class="block text-sm font-medium text-slate-600"
                      >Tarih</label
                    ><input
                      type="date"
                      id="mulakatTarihi"
                      class="hiri-input mt-1"
                    />
                  </div>
                  <div>
                    <label
                      for="mulakatSaati"
                      class="block text-sm font-medium text-slate-600"
                      >Saat</label
                    ><input
                      type="time"
                      id="mulakatSaati"
                      class="hiri-input mt-1"
                    />
                  </div>
                </div>
              </div>
              <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                <p class="text-sm text-purple-700 flex items-start">
                  <i class="fas fa-info-circle mr-2 mt-1 flex-shrink-0"></i
                  ><span id="mulakatDavetNotu"></span>
                </p>
              </div>
              <button
                type="submit"
                id="mulakatFormSubmitButton"
                class="hiri-button hiri-button-primary w-full py-3"
              ></button>
            </form>
          </div>
        </div>

        <!-- ON-DEMAND MÜLAKAT EKRANI -->
        <div id="onDemandInterviewCreateView" class="hidden">
          <div class="max-w-7xl mx-auto">
            <header
              class="flex flex-col sm:flex-row justify-between items-center mb-8 gap-4"
            >
              <div>
                <button
                  id="backToProfileFromOnDemand"
                  class="text-sm text-gray-500 hover:text-gray-800"
                >
                  <i class="fas fa-arrow-left mr-2"></i>Aday Profiline Dön
                </button>
                <h1 class="text-3xl font-extrabold text-slate-800 mt-1">
                  Yeni On-Demand Mülakat
                </h1>
              </div>
              <div class="flex items-center space-x-2">
                <button
                  id="previewAndSendButton"
                  class="hiri-button hiri-button-primary"
                >
                  <i class="fas fa-paper-plane mr-2"></i>Önizle ve Gönder
                </button>
              </div>
            </header>
            <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div class="space-y-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border space-y-8">
                  <div>
                    <h2 class="text-xl font-semibold mb-4">1. Mülakat Türü</h2>
                    <div class="grid sm:grid-cols-2 gap-4">
                      <div class="type-selector-card active" data-type="video">
                        <div class="flex items-start">
                          <div class="icon"><i class="fas fa-video"></i></div>
                          <div class="ml-4">
                            <h3 class="font-bold">Video Mülakat</h3>
                            <p class="text-xs text-gray-500 mt-1">
                              Aday web kamerasıyla soruları yanıtlar.
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="type-selector-card" data-type="phone">
                        <div class="flex items-start">
                          <div class="icon">
                            <i class="fa-solid fa-voicemail"></i>
                          </div>
                          <div class="ml-4">
                            <h3 class="font-bold">Telefon Mülakatı</h3>
                            <p class="text-xs text-gray-500 mt-1">
                              HiriBot, adayı arayarak soruları iletir.
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div>
                    <h2 class="text-xl font-semibold mb-3">
                      2. Mülakat Soruları
                    </h2>
                    <div id="questionListContainer" class="space-y-3"></div>
                    <button
                      id="addQuestionButton"
                      class="w-full border-2 border-dashed rounded-lg py-3 text-gray-500 hover:border-purple-500 hover:text-purple-600 mt-4 flex items-center justify-center gap-2 font-semibold"
                    >
                      <i class="fas fa-plus"></i>Yeni Soru Ekle
                    </button>
                  </div>
                  <div class="pt-6 border-t">
                    <h2 class="text-xl font-semibold mb-3">
                      3. Davet ve Zamanlama
                    </h2>
                    <div class="space-y-6">
                      <div>
                        <label
                          for="deadlineDate"
                          class="font-medium text-gray-700 block mb-1"
                          >Son Tarih</label
                        ><input
                          type="date"
                          id="deadlineDate"
                          class="hiri-input"
                        />
                      </div>
                      <div id="phoneSettingsSection" class="hidden">
                        <label class="font-medium text-gray-700 block mb-1"
                          >Arama Sıklığı</label
                        ><select id="callFrequency" class="hiri-input">
                          <option value="2-2">2 gün, günde 2 kez</option>
                          <option value="3-1">3 gün, günde 1 kez</option>
                        </select>
                      </div>
                      <div>
                        <label
                          for="emailSubject"
                          class="font-medium text-gray-700 block mb-1"
                          >Mail Konusu</label
                        ><input
                          type="text"
                          id="emailSubject"
                          class="hiri-input mb-3"
                        /><label
                          for="emailContent"
                          class="font-medium text-gray-700 block mb-1"
                          >Mail İçeriği</label
                        ><textarea
                          id="emailContent"
                          rows="8"
                          class="hiri-input"
                        ></textarea>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="sticky top-8">
                <div class="live-preview">
                  <div id="livePreviewScreen" class="live-preview-screen"></div>
                </div>
              </div>
            </main>
          </div>
        </div>

        <!-- KULLANICI PROFİLİ EKRANI -->
        <div id="userProfileView" class="hidden space-y-6">
          <h1 class="text-3xl font-bold text-slate-800">Profilim</h1>
          <div class="hiri-card">
            <h2 class="text-xl font-semibold mb-4">Aktivite Loglarım</h2>
            <div id="userActivityLogsList" class="space-y-2"></div>
          </div>
        </div>

        <!-- BİLGİ BANKASI EKRANI -->
        <div id="bilgiBankasiView" class="hidden">
          <div
            class="flex flex-col sm:flex-row justify-between items-center gap-4"
          >
            <div class="w-full">
              <h1 class="text-3xl font-bold text-slate-800">
                Kurumsal Bilgi Bankası
              </h1>
              <p class="text-slate-500 mt-1">
                Yapay zekayı şirketinizin özel bilgi ve belgeleriyle eğitin.
              </p>
            </div>
            <button
              id="openNewDocumentModalButton"
              class="hiri-button hiri-button-primary flex-shrink-0 w-full sm:w-auto"
            >
              <i class="fas fa-plus mr-2"></i>Yeni Doküman Ekle
            </button>
          </div>
          <div class="hiri-card mt-6">
            <div id="bilgiBankasiList" class="divide-y divide-slate-100"></div>
          </div>
        </div>
      </main>

      <footer class="bg-slate-800 text-white text-center p-4 text-xs">
        © 2025 Hiri.ai Birleştirilmiş Prototip - Tüm Hakları Saklıdır
      </footer>
    </div>

    <!-- ===== MODALS ===== -->

    <div id="cvModal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 class="text-2xl font-semibold mb-4">CV İçeriği</h2>
        <pre
          id="cvModalContent"
          class="bg-slate-50 p-4 rounded-md overflow-auto max-h-[60vh] text-xs"
        ></pre>
      </div>
    </div>
    <div id="disMulakatModal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 class="text-2xl font-semibold mb-5">Dış Mülakat Kaydı Ekle</h2>
        <form id="disMulakatForm" class="space-y-4">
          <input type="hidden" id="disMulakatAdayId" />
          <div>
            <label for="disMulakatTarihi" class="block text-sm">Tarih*</label
            ><input type="date" id="disMulakatTarihi" class="hiri-input mt-1" />
          </div>
          <div>
            <label for="disMulakatNotlarText" class="block text-sm"
              >Notlar</label
            ><textarea
              id="disMulakatNotlarText"
              rows="4"
              class="hiri-input mt-1"
            ></textarea>
          </div>
          <button
            type="submit"
            class="hiri-button hiri-button-primary w-full py-2.5"
          >
            Kaydet
          </button>
        </form>
      </div>
    </div>
    <div id="mulakatRaporModal" class="modal">
      <div class="modal-content max-w-4xl">
        <div class="flex justify-between items-center mb-6 pb-4 border-b">
          <h2 class="text-2xl font-bold">Mülakat Sonuç Raporu</h2>
          <div class="flex items-center space-x-3">
            <button
              id="downloadReportButton"
              class="hiri-button hiri-button-secondary text-sm py-1.5 px-3"
            >
              <i class="fas fa-download mr-2"></i>Raporu İndir</button
            ><span class="close-button">&times;</span>
          </div>
        </div>
        <div
          id="mulakatRaporHeader"
          class="mb-6 p-4 bg-slate-50 rounded-lg border"
        ></div>
        <div
          id="mulakatRaporContent"
          class="space-y-6 text-sm max-h-[60vh] overflow-y-auto pr-3"
        ></div>
      </div>
    </div>
    <div id="mulakatChatModal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 class="text-2xl font-semibold mb-4">Mülakat ile Sohbet Et</h2>
        <div
          id="mulakatChatBox"
          class="border p-3 h-72 overflow-y-auto bg-slate-50 mb-4"
        ></div>
        <div class="flex items-center">
          <input
            type="text"
            id="mulakatChatInput"
            class="hiri-input flex-grow mr-2"
            placeholder="Mesaj..."
          /><button
            id="mulakatChatSend"
            class="hiri-button hiri-button-primary py-2.5 px-4"
          >
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>
    <div id="yeniNotModal" class="modal">
      <div class="modal-content max-w-md">
        <span class="close-button">&times;</span>
        <h2 class="text-2xl font-semibold mb-5">Yeni Not Ekle</h2>
        <form id="yeniNotForm">
          <textarea id="yeniNotText" rows="4" class="hiri-input"></textarea
          ><button
            type="submit"
            class="hiri-button hiri-button-primary w-full py-2 mt-4"
          >
            Kaydet
          </button>
        </form>
      </div>
    </div>
    <div id="onDemandPreviewModal" class="modal">
      <div class="bg-white rounded-xl w-full max-w-6xl h-[90vh] flex flex-col">
        <div class="flex justify-between items-center p-4 border-b">
          <h2 class="text-2xl font-bold">Önizle ve Gönder</h2>
          <button
            id="closeOnDemandPreviewButton"
            class="text-gray-400 hover:text-gray-700"
          >
            <i class="fas fa-times fa-lg"></i>
          </button>
        </div>
        <div
          class="flex-grow grid grid-cols-1 md:grid-cols-2 gap-6 p-6 overflow-y-auto bg-gray-50"
        >
          <div>
            <h3 class="font-bold text-lg mb-3">Mülakat Akışı</h3>
            <div id="onDemandPreviewQuestionList" class="space-y-3"></div>
          </div>
          <div class="flex flex-col">
            <h3 class="font-bold text-lg mb-3">Davet Maili</h3>
            <div class="border rounded-md p-3 flex-grow bg-gray-50/50">
              <div class="text-sm text-gray-500">
                <p>
                  <strong>Konu:</strong>
                  <input
                    type="text"
                    id="previewEmailSubject"
                    class="font-semibold w-full bg-transparent border-b focus:outline-none focus:border-purple-500"
                  />
                </p>
              </div>
              <hr class="my-3" />
              <div
                id="previewEmailContent"
                contenteditable="true"
                class="prose prose-sm max-w-none w-full h-full focus:outline-none p-1"
              ></div>
            </div>
          </div>
        </div>
        <div class="flex justify-end p-4 border-t bg-gray-100">
          <button
            id="finalSendInviteButton"
            class="hiri-button hiri-button-primary"
          >
            <i class="fas fa-paper-plane mr-2"></i> Daveti Şimdi Gönder
          </button>
        </div>
      </div>
    </div>
    <div id="newDocumentModal" class="modal">
      <div class="modal-content max-w-lg">
        <span class="close-button">&times;</span>
        <h2 class="text-2xl font-semibold mb-5">Yeni Doküman Ekle</h2>
        <form id="newDocumentForm" class="space-y-4">
          <div>
            <label for="docTitle" class="block text-sm">Doküman Başlığı*</label
            ><input
              type="text"
              id="docTitle"
              class="hiri-input mt-1"
              required
            />
          </div>
          <div>
            <label for="docType" class="block text-sm">Doküman Tipi*</label
            ><input
              type="text"
              id="docType"
              class="hiri-input mt-1"
              placeholder="örn: Kurum Kültürü"
              required
            />
          </div>
          <div>
            <label for="docFile" class="block text-sm">Dosya*</label
            ><input
              type="file"
              id="docFile"
              class="hiri-input p-2 mt-1"
              required
            />
          </div>
          <button
            type="submit"
            class="hiri-button hiri-button-primary w-full py-2.5"
          >
            Kaydet
          </button>
        </form>
      </div>
    </div>
    <div id="shareProfileModal" class="modal">
      <div class="modal-content max-w-2xl">
        <span class="close-button">&times;</span>
        <h2 class="text-2xl font-bold mb-1">Aday Profilini Paylaş</h2>
        <p id="shareModalCandidateName" class="text-sm text-slate-500 mb-6"></p>
        <form id="shareProfileForm" class="space-y-6">
          <div>
            <label class="block text-base font-semibold mb-3"
              >Paylaşılacak Alanlar</label
            >
            <div
              id="shareableFieldsContainer"
              class="grid grid-cols-2 gap-x-6 gap-y-3"
            ></div>
          </div>
          <div class="border-t pt-6 space-y-4">
            <label class="block text-sm">E-posta*</label
            ><input
              type="email"
              id="shareEmail"
              class="hiri-input"
              required
            /><label class="block text-sm mt-2"
              >Link Geçerlilik Süresi (Saat)</label
            ><input
              type="number"
              id="shareDuration"
              value="12"
              class="hiri-input w-32"
            />
          </div>
          <div id="generatedLinkContainer" class="hidden pt-4">
            <label class="block text-sm">Oluşturulan Paylaşım Linki</label>
            <div class="mt-1 flex gap-2">
              <input
                type="text"
                id="generatedLink"
                class="hiri-input bg-slate-200"
                readonly
              /><button
                type="button"
                id="copyLinkButton"
                class="hiri-button hiri-button-secondary px-4"
              >
                Kopyala
              </button>
            </div>
          </div>
          <div class="flex justify-end pt-4">
            <button type="submit" class="hiri-button hiri-button-primary">
              <i class="fas fa-link mr-2"></i> Link Oluştur
            </button>
          </div>
        </form>
      </div>
    </div>
    <div id="unifiedChatModal" class="modal">
      <div class="modal-content max-w-2xl">
        <span class="close-button">&times;</span>
        <div class="flex items-center mb-4">
          <div
            class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mr-4"
          >
            <i class="fas fa-robot text-2xl text-purple-600"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold">HiriBot Asistan</h2>
            <p id="unifiedChatSubtext" class="text-sm text-slate-500"></p>
          </div>
        </div>
        <div
          id="unifiedChatHistory"
          class="border p-4 h-80 overflow-y-auto bg-slate-50 mb-4"
        ></div>
        <div
          id="chatSuggestionContainer"
          class="flex flex-wrap gap-2 my-4"
        ></div>
        <div class="flex items-center pt-4 border-t">
          <input
            type="text"
            id="unifiedChatInput"
            class="hiri-input flex-grow mr-2"
            placeholder="HiriBot'a bir soru sorun..."
          /><button
            id="unifiedChatSend"
            class="hiri-button hiri-button-primary px-4"
          >
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- ===== JAVASCRIPT ===== -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // NOT: Bu bir prototiptir. Tüm veriler simülasyon amaçlı olarak bu nesnede saklanmaktadır.
        const DUMMY_DATA = {
          companyName: "Turkcell",
          user: { name: "Tuna Can", initial: "T" },
          positions: [
            {
              id: "pos1",
              title: "Senior Software Developer - Turkcell",
              description: `Turkcell olarak yeteneklerimize eşsiz insan deneyimi yaşatarak, değer yaratan sürdürülebilir bir organizasyon inşa etmeyi ve işveren markamızı zirveye taşımayı hedefliyoruz.`,
            },
            {
              id: "pos2",
              title: "Junior Marketing Specialist - Hiri Inc.",
              description:
                "Hiri Inc. olarak pazarlama ekibimize dinamik, öğrenmeye açık bir Junior Marketing Specialist arıyoruz.",
            },
          ],
          candidates: [
            {
              id: "aday1",
              name: "Mehmet Ali",
              surname: "Demir",
              email: "mehmetalidemir@example.com",
              phone: "0555 123 4567",
              positionId: "pos1",
              cvText: `MEHMET ALİ DEMİR\nReact, TypeScript ve modern JavaScript framework'leri konusunda 7+ yıl deneyime sahip, kullanıcı odaklı, performanslı ve ölçeklenebilir web uygulamaları geliştirmeye tutkulu bir yazılım geliştiricisiyim.`,
              cvSummaryAI:
                "Mehmet Ali Demir, React ve TypeScript odaklı 7+ yıl deneyime sahip kıdemli bir frontend geliştiricidir. Büyük ölçekli SaaS projelerinde çalışmış, performans optimizasyonu ve teknik liderlik konularında tecrübelidir.",
              compatibilityScore: 88,
              compatibilityReasons: [
                "Veri görselleştirme (D3.js) deneyimi faydalı olabilir.",
                "Daha kapsamlı E2E test deneyimi beklenebilir.",
              ],
              hasInventory: true,
              personalityInventorySummaryAI:
                "DISC analizine göre, aday 'Dominant' ve 'Conscientious' (Vicdanlı) profillerine yüksek yatkınlık göstermektedir. Sonuç odaklı, kararlı ve analitik bir yapıya sahiptir.",
              notes: [
                {
                  user: "Elif Kaya",
                  timestamp: "10.06.2025 14:30",
                  text: "Teknik mülakat performansı çok iyiydi.",
                },
                {
                  user: "Tuna Can",
                  timestamp: "09.06.2025 11:00",
                  text: "Adayın GitHub profili incelendi, temiz kod yazıyor.",
                },
              ],
              logs: [
                {
                  user: "Elif Kaya",
                  timestamp: "10.06.2025 15:45",
                  action: "Hakkında not eklendi.",
                  icon: "fa-sticky-note",
                  color: "bg-yellow-100 text-yellow-600",
                },
                {
                  user: "Tuna Can",
                  timestamp: "10.06.2025 11:20",
                  action: "Kişilik envanteri yüklendi.",
                  icon: "fa-file-import",
                  color: "bg-teal-100 text-teal-600",
                },
                {
                  user: "Sistem",
                  timestamp: "08.06.2025 18:00",
                  action: "Aday oluşturuldu.",
                  icon: "fa-user-plus",
                  color: "bg-blue-100 text-blue-600",
                },
              ],
              interviews: [
                {
                  id: "int1_1",
                  type: "HiriBot Teknik",
                  date: "2025-06-10",
                  time: "10:00",
                  status: "Tamamlandı",
                  notes: "Teknik değerlendirme yapıldı.",
                  report: {
                    strengths: [
                      "React & TypeScript Yetkinliği",
                      "Problem Çözme ve Analitik Düşünme",
                      "Teknik Liderlik ve Mentorluk",
                    ],
                    areasForDevelopment: [
                      "Veri Görselleştirme (D3.js)",
                      "Kapsamlı E2E Test Deneyimi",
                    ],
                    starExamples: [
                      {
                        situation:
                          "E-ticaret sitesinde sayfa yükleme yavaşlığı.",
                        task: "Performansı %30 iyileştirmek.",
                        action:
                          "Code splitting, lazy loading, memoization uygulandı.",
                        result:
                          "Yükleme süreleri %40 iyileşti, bounce rate %15 düştü.",
                        competency: "Performans Optimizasyonu",
                      },
                    ],
                  },
                },
              ],
            },
            {
              id: "aday2",
              name: "Gamze Nur",
              surname: "Bayrak",
              email: "gamzenurb@example.com",
              phone: "0555 246 8135",
              positionId: "pos2",
              cvText:
                "GAMZE NUR BAYRAK\nYeni mezun, enerjik ve öğrenmeye açık bir pazarlama profesyoneliyim.",
              cvSummaryAI:
                "Gamze Nur Bayrak, yeni mezun bir pazarlama adayıdır. Dijital pazarlama, içerik üretimi ve sosyal medya konularında staj deneyimi ve güçlü teorik bilgiye sahiptir.",
              compatibilityScore: 92,
              compatibilityReasons: [
                "Profesyonel iş hayatında tam zamanlı deneyim henüz bulunmuyor.",
              ],
              hasInventory: false,
              personalityInventorySummaryAI: null,
              notes: [],
              logs: [
                {
                  user: "Tuna Can",
                  timestamp: "11.06.2025 10:15",
                  action: "Profil görüntülendi.",
                  icon: "fa-eye",
                  color: "bg-gray-100 text-gray-600",
                },
              ],
              interviews: [],
            },
          ],
          userNotes: [
            {
              id: `note_${Date.now()}`,
              text: "Mehmet Ali Demir'in teknik mülakatını tekrar gözden geçir.",
            },
          ],
          userActivityLogs: [
            {
              timestamp: "12.06.2025 10:15",
              action: "Gamze Nur Bayrak adlı adayın profilini görüntüledi.",
            },
          ],
          knowledgeBase: [
            {
              id: "kb1",
              title: "Kurum Kültürü ve Değerler Kılavuzu",
              type: "Kurum Kültürü",
              uploadedBy: "Elif Kaya",
              date: "20.05.2025",
              status: "Aktif",
            },
            {
              id: "kb2",
              title: "DISC Kişilik Envanteri Değerlendirme Esasları",
              type: "Kişilik Değerlendirme",
              uploadedBy: "Tuna Can",
              date: "15.04.2025",
              status: "Aktif",
            },
            {
              id: "kb3",
              title: "Senior Developer Yetkinlik Matrisi",
              type: "Teknik Yetkinlik",
              uploadedBy: "Ahmet Çelik",
              date: "01.06.2025",
              status: "Aktif",
            },
          ],
        };

        // Global Değişkenler
        let currentAdayId = null;
        let currentMulakatIdForReport = null;
        const activeViews = {};
        const onDemandState = {
          interviewType: "video",
          questions: [],
          deadline: "",
          emailSubject: "",
          emailContent: "",
        };

        // === TEMEL FONKSİYONLAR ===

        function showView(viewId) {
          Object.values(activeViews).forEach(
            (el) => el && el.classList.add("hidden")
          );
          if (viewId === "loginView") {
            if (activeViews.appView)
              activeViews.appView.classList.add("hidden");
            if (activeViews.loginView)
              activeViews.loginView.classList.remove("hidden");
          } else {
            if (activeViews.loginView)
              activeViews.loginView.classList.add("hidden");
            if (activeViews.appView)
              activeViews.appView.classList.remove("hidden");
            if (activeViews[viewId])
              activeViews[viewId].classList.remove("hidden");
            else console.error(`View with id "${viewId}" not found.`);
          }
          window.scrollTo(0, 0);
        }

        function getCandidateById(id) {
          return DUMMY_DATA.candidates.find((c) => c.id === id);
        }
        function getPositionById(id) {
          return DUMMY_DATA.positions.find((p) => p.id === id);
        }
        function closeModal(modalElement) {
          if (modalElement) modalElement.classList.remove("is-open");
        }
        function openModal(modalElement) {
          if (modalElement) modalElement.classList.add("is-open");
        }

        // === RENDER FONKSİYONLARI ===

        function renderDashboard() {
          const view = activeViews.dashboardView;
          if (!view) return;
          view.querySelector("#dashboardCompanyName").textContent =
            DUMMY_DATA.companyName;
          renderYaklasanMulakatlar();
          renderKisiselNotlar();
        }

        function renderYaklasanMulakatlar() {
          const listeAlani = document.getElementById(
            "yaklasanMulakatlarListesi"
          );
          if (!listeAlani) return;
          let upcoming = DUMMY_DATA.candidates.flatMap((aday) =>
            aday.interviews
              .filter((iv) => iv.status === "Planlandı")
              .map((iv) => ({
                ...iv,
                adayName: `${aday.name} ${aday.surname}`,
              }))
          );
          listeAlani.innerHTML =
            upcoming.length === 0
              ? '<p class="text-xs text-slate-500 italic">Yaklaşan mülakat bulunmuyor.</p>'
              : upcoming
                  .map(
                    (m) =>
                      `<div class="p-2.5 border-b"><p class="text-sm font-semibold text-purple-700">${
                        m.adayName
                      }</p><p class="text-xs text-slate-500"><i class="fas fa-calendar-alt mr-1"></i>${
                        m.date
                      } <i class="fas fa-clock mr-1 ml-2"></i>${
                        m.time || "N/A"
                      }</p></div>`
                  )
                  .join("");
        }

        function renderKisiselNotlar() {
          const notlarAlani = document.getElementById("kisiselNotlarAlani");
          if (!notlarAlani) return;
          notlarAlani.innerHTML =
            DUMMY_DATA.userNotes.length === 0
              ? '<p class="text-xs text-slate-500 italic">Henüz not eklenmemiş.</p>'
              : DUMMY_DATA.userNotes
                  .map(
                    (note) =>
                      `<div class="sticky-note text-xs relative group"><p>${note.text}</p><button class="absolute top-1 right-1 text-amber-500 opacity-0 group-hover:opacity-100 delete-note-button" data-noteid="${note.id}"><i class="fas fa-times-circle"></i></button></div>`
                  )
                  .join("");
        }

        function renderAdayListesi() {
          const view = activeViews.adayListView;
          if (!view) return;
          const tableBody = view.querySelector("#adayListTableBody");
          const searchInput = view
            .querySelector("#adaySearchInput")
            .value.toLowerCase();
          const filtered = DUMMY_DATA.candidates.filter((aday) =>
            `${aday.name} ${aday.surname}`.toLowerCase().includes(searchInput)
          );

          tableBody.innerHTML = "";
          filtered.forEach((aday) => {
            const position = getPositionById(aday.positionId);
            const row = document.createElement("tr");
            row.className = "hover:bg-slate-50 transition-colors";
            row.innerHTML = `
                    <td class="px-5 py-4 font-medium text-slate-800">${
                      aday.name
                    } ${aday.surname}</td>
                    <td class="px-5 py-4 text-sm text-slate-500">${
                      aday.email
                    }</td>
                    <td class="px-5 py-4 text-sm text-slate-500">${
                      position ? position.title : "N/A"
                    }</td>
                    <td class="px-5 py-4"><div class="w-full bg-slate-200 rounded-full h-5"><div class="bg-gradient-to-r from-purple-500 to-indigo-500 h-5 rounded-full text-xs flex items-center justify-center text-white" style="width: ${
                      aday.compatibilityScore
                    }%;">${aday.compatibilityScore}%</div></div></td>
                    <td class="px-5 py-4"><button class="text-purple-600 hover:text-purple-800 font-semibold view-aday-button" data-adayid="${
                      aday.id
                    }">Görüntüle <i class="fas fa-arrow-right text-xs"></i></button></td>
                `;
            tableBody.appendChild(row);
          });
          view.querySelector("#adayListCount").textContent = filtered.length;
        }

        function renderAdayProfili(adayId) {
          const aday = getCandidateById(adayId);
          if (!aday) {
            showView("adayListView");
            return;
          }
          currentAdayId = adayId;
          const view = activeViews.adayProfilView;

          view.querySelector(
            "#profilAdayAdSoyad"
          ).textContent = `${aday.name} ${aday.surname}`;
          view.querySelector("#profilAdayEmail").textContent = aday.email;
          view.querySelector("#profilCvOzeti").textContent = aday.cvSummaryAI;
          view.querySelector("#profilDegerlendirilenPozisyon").textContent =
            getPositionById(aday.positionId)?.title || "N/A";
          const scoreBar = view.querySelector("#profilUyumlulukSkoruBar");
          scoreBar.style.width = `${aday.compatibilityScore}%`;
          scoreBar.querySelector(
            "span"
          ).textContent = `${aday.compatibilityScore}%`;
          view.querySelector("#compatibilityTooltipText").innerHTML =
            aday.compatibilityReasons.map((r) => `&bull; ${r}`).join("<br>");

          view
            .querySelectorAll(".profil-tab")
            .forEach((t) => t.classList.remove("active"));
          view
            .querySelectorAll(".profil-tab-content")
            .forEach((tc) => tc.classList.add("hidden"));
          view
            .querySelector('.profil-tab[data-tab="genelBakis"]')
            .classList.add("active");
          view
            .querySelector("#tabContent_genelBakis")
            .classList.remove("hidden");

          renderPersonalityInventory(aday);
          renderNotesAndLogs(aday);
          renderGecmisMulakatlar(aday);
          renderMulakatSorulari(aday.positionId);
        }

        function renderPersonalityInventory(aday) {
          const container = document.getElementById(
            "personalityInventorySection"
          );
          if (aday.hasInventory) {
            container.innerHTML = `<p class="text-sm text-slate-600 bg-teal-50 p-4 rounded-lg border border-teal-200">${aday.personalityInventorySummaryAI}</p>`;
          } else {
            container.innerHTML = `<label for="inventory-file-upload-${aday.id}" class="relative cursor-pointer w-full flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg hover:border-purple-400"><i class="fas fa-file-import text-3xl text-slate-400 mb-2"></i><span class="font-semibold text-purple-600">Kişilik Envanteri Yükle</span><p class="text-xs text-slate-400 mt-1">PDF, DOCX</p><input id="inventory-file-upload-${aday.id}" type="file" class="sr-only"></label>`;
            document
              .getElementById(`inventory-file-upload-${aday.id}`)
              .addEventListener("change", (e) => {
                if (e.target.files.length > 0) {
                  aday.hasInventory = true;
                  aday.personalityInventorySummaryAI =
                    "DISC analizine göre, aday 'Dominant' ve 'Conscientious' profillerine yatkınlık göstermektedir. (Yeni yüklendi)";
                  renderAdayProfili(aday.id);
                }
              });
          }
        }

        function renderNotesAndLogs(aday) {
          const notesList = document.getElementById("candidateNotesList");
          const logsList = document.getElementById("candidateLogsList");
          notesList.innerHTML =
            aday.notes?.length > 0
              ? [...aday.notes]
                  .reverse()
                  .map(
                    (note) =>
                      `<div class="bg-slate-50 p-3 rounded-lg border"><p class="text-sm">${note.text}</p><p class="text-xs text-slate-400 mt-2 text-right">-- ${note.user} (${note.timestamp})</p></div>`
                  )
                  .join("")
              : `<p class="text-sm italic text-center p-4">Not eklenmemiş.</p>`;
          logsList.innerHTML =
            aday.logs?.length > 0
              ? [...aday.logs]
                  .reverse()
                  .map(
                    (log) =>
                      `<div class="log-item"><div class="log-icon ${log.color}"><i class="fas ${log.icon}"></i></div><div><p class="text-sm">${log.action}</p><p class="text-xs text-slate-500">${log.user} - ${log.timestamp}</p></div></div>`
                  )
                  .join("")
              : `<p class="text-sm italic text-center p-4">İşlem geçmişi yok.</p>`;
        }

        function renderGecmisMulakatlar(aday) {
          const listeAlani = document.getElementById("gecmisMulakatlarListesi");
          listeAlani.innerHTML = "";
          if (!aday.interviews || aday.interviews.length === 0) {
            listeAlani.innerHTML =
              '<p class="text-slate-500 italic p-3 bg-slate-50 rounded-md text-center">Mülakat kaydı bulunmamaktadır.</p>';
            return;
          }
          aday.interviews.forEach((mulakat) => {
            const mulakatDiv = document.createElement("div");
            mulakatDiv.className =
              "p-4 border rounded-lg bg-white hover:shadow-md";
            mulakatDiv.innerHTML = `<div class="flex justify-between items-center"><div><p class="font-semibold text-slate-700">${
              mulakat.date
            } - ${mulakat.type}</p><p class="text-xs text-slate-500 mt-1">${
              mulakat.notes
            }</p></div>${
              mulakat.report
                ? `<button class="hiri-button hiri-button-primary text-xs py-1.5 px-2.5 view-report-button" data-mulakatid="${mulakat.id}"><i class="fas fa-chart-bar mr-1"></i>Raporu Gör</button>`
                : ""
            }</div>`;
            listeAlani.appendChild(mulakatDiv);
          });
        }

        function renderMulakatSorulari(positionId) {
          const sorularAlani = document.getElementById("mulakatSorulariAlani");
          if (!sorularAlani) return;
          const sorular = [
            "Geçmiş bir projedeki teknik zorluğu ve çözümünüzü anlatın (STAR).",
            "Ekip içi anlaşmazlık yaşadığınız bir durumu ve nasıl çözdüğünüzü anlatın (STAR).",
          ];
          sorularAlani.innerHTML = sorular
            .map(
              (soru) =>
                `<div class="p-4 bg-slate-50 rounded-lg border"><h4 class="font-semibold text-slate-700 mb-2">${
                  soru.includes("teknik")
                    ? "Teknik Yetkinlik"
                    : "Takım Çalışması"
                }</h4><p class="text-sm text-slate-600">${soru}</p></div>`
            )
            .join("");
        }

        function renderBilgiBankasi() {
          const listContainer = document.getElementById("bilgiBankasiList");
          if (!listContainer) return;
          const typeColors = {
            "Kurum Kültürü": "bg-blue-100 text-blue-800",
            "Kişilik Değerlendirme": "bg-teal-100 text-teal-800",
            "Teknik Yetkinlik": "bg-purple-100 text-purple-800",
          };
          listContainer.innerHTML = DUMMY_DATA.knowledgeBase
            .map(
              (doc) => `
                <div class="flex items-center justify-between p-4 hover:bg-slate-50">
                    <div><p class="font-semibold">${
                      doc.title
                    }</p><p class="text-xs text-slate-500">Yükleyen: ${
                doc.uploadedBy
              } - ${doc.date}</p></div>
                    <div class="flex items-center gap-4"><span class="text-xs font-medium px-2.5 py-0.5 rounded-full ${
                      typeColors[doc.type] || "bg-gray-100"
                    }">${
                doc.type
              }</span><span class="text-xs font-bold text-green-600">${
                doc.status
              }</span><button class="text-slate-400 hover:text-red-600" title="Sil"><i class="fas fa-trash-alt"></i></button></div>
                </div>`
            )
            .join("");
        }

        function renderUserProfile() {
          const logsList = document.getElementById("userActivityLogsList");
          if (!logsList) return;
          logsList.innerHTML = DUMMY_DATA.userActivityLogs
            .map(
              (log) =>
                `<div class="log-item"><div class="log-icon bg-gray-100"><i class="fas fa-history"></i></div><div><p class="text-sm">${log.action}</p><p class="text-xs text-slate-500">${log.timestamp}</p></div></div>`
            )
            .join("");
        }

        // === ETKİLEŞİM FONKSİYONLARI ===

        function openUnifiedChat() {
          const aday = getCandidateById(currentAdayId);
          if (!aday) return;
          const modal = activeViews.unifiedChatModal;
          modal.querySelector(
            "#unifiedChatSubtext"
          ).textContent = `${aday.name} ${aday.surname} hakkında sorular sorun.`;
          const history = modal.querySelector("#unifiedChatHistory");
          history.innerHTML = `<div class="chat-message assistant">Merhaba! Ben HiriBot. Bu aday hakkında size nasıl yardımcı olabilirim?</div>`;
          const suggestions = [
            { text: "CV'sini özetle", cond: aday.cvSummaryAI },
            { text: "Kişilik analizi nedir?", cond: aday.hasInventory },
            {
              text: "Mülakattaki güçlü yanları nelerdi?",
              cond: aday.interviews[0]?.report?.strengths,
            },
          ];
          modal.querySelector("#chatSuggestionContainer").innerHTML =
            suggestions
              .filter((s) => s.cond)
              .map(
                (s) =>
                  `<button class="chat-suggestion-button">${s.text}</button>`
              )
              .join("");
          openModal(modal);
        }

        function handleUnifiedChatSend(message) {
          const modal = activeViews.unifiedChatModal;
          const history = modal.querySelector("#unifiedChatHistory");
          const input = modal.querySelector("#unifiedChatInput");
          const userMessageText = message || input.value.trim();
          if (userMessageText === "") return;

          modal.querySelector("#chatSuggestionContainer").innerHTML = "";
          history.innerHTML += `<div class="chat-message user">${userMessageText}</div>`;
          input.value = "";
          history.scrollTop = history.scrollHeight;

          setTimeout(() => {
            const aday = getCandidateById(currentAdayId);
            const msg = userMessageText.toLowerCase();
            let aiResponse = "Üzgünüm, bu soruyu anlayamadım.";
            if (msg.includes("özet"))
              aiResponse = `İşte ${aday.name}'in CV özeti: <br><em>${aday.cvSummaryAI}</em>`;
            if (msg.includes("kişilik"))
              aiResponse = aday.hasInventory
                ? `Kişilik envanteri özetine göre: <br><em>${aday.personalityInventorySummaryAI}</em>`
                : "Bu aday için kişilik envanteri bulunmuyor.";
            if (msg.includes("güçlü"))
              aiResponse = `Mülakat raporuna göre güçlü yanları: <ul class="list-disc list-inside mt-2">${aday.interviews[0].report.strengths
                .map((s) => `<li>${s}</li>`)
                .join("")}</ul>`;

            history.innerHTML += `<div class="chat-message assistant">${aiResponse}</div>`;
            history.scrollTop = history.scrollHeight;
          }, 800);
        }

        function openShareProfileModal() {
          const aday = getCandidateById(currentAdayId);
          if (!aday) return;
          const modal = activeViews.shareProfileModal;
          modal.querySelector(
            "#shareModalCandidateName"
          ).textContent = `${aday.name} ${aday.surname} adlı adayın profilini paylaşıyorsunuz.`;
          const fields = [
            { id: "cvSummary", label: "CV Özeti" },
            { id: "compatibility", label: "Uyumluluk" },
            {
              id: "personality",
              label: "Kişilik Envanteri",
              cond: aday.hasInventory,
            },
            {
              id: "interviews",
              label: "Mülakatlar",
              cond: aday.interviews.length > 0,
            },
          ];
          modal.querySelector("#shareableFieldsContainer").innerHTML = fields
            .filter((f) => f.cond !== false)
            .map(
              (f) =>
                `<div class="flex items-center"><input id="share_${f.id}" type="checkbox" checked class="h-4 w-4 text-purple-600 rounded"><label for="share_${f.id}" class="ml-3 text-sm">${f.label}</label></div>`
            )
            .join("");
          modal.querySelector("#shareProfileForm").reset();
          modal.querySelector("#shareDuration").value = 12;
          modal
            .querySelector("#generatedLinkContainer")
            .classList.add("hidden");
          openModal(modal);
        }

        function initOnDemandScreen() {
          // On-demand ekranı için temel kurulum ve event listener'lar
          const aday = getCandidateById(currentAdayId);
          const position = getPositionById(aday.positionId);
          const emailTemplates = {
            video: {
              subject: "{sirket_adi} Video Mülakat Davetiniz",
              content: `Merhaba {aday_adi},\n\n{sirket_adi} şirketindeki {pozisyon_adi} pozisyonu için bir sonraki adımı sizinle paylaşmaktan mutluluk duyarız.`,
            },
            phone: {
              subject: "{sirket_adi} Telefon Mülakatı Bilgilendirmesi",
              content: `Merhaba {aday_adi},\n\n{sirket_adi} şirketindeki {pozisyon_adi} pozisyonu için sürecimizdeki bir sonraki adım telefon mülakatıdır.`,
            },
          };
          const replacePlaceholders = (text) =>
            text
              .replace(/{aday_adi}/g, `${aday.name} ${aday.surname}`)
              .replace(/{pozisyon_adi}/g, position.title)
              .replace(/{sirket_adi}/g, DUMMY_DATA.companyName);

          const template = emailTemplates[onDemandState.interviewType];
          onDemandState.emailSubject = replacePlaceholders(template.subject);
          onDemandState.emailContent = replacePlaceholders(template.content);

          document.getElementById("emailSubject").value =
            onDemandState.emailSubject;
          document.getElementById("emailContent").value =
            onDemandState.emailContent;
        }

        // === UYGULAMA BAŞLATMA ===

        function initApp() {
          const viewIds = [
            "loginView",
            "appView",
            "dashboardView",
            "adayListView",
            "adayProfilView",
            "pozisyonlarListView",
            "pozisyonEkleView",
            "adayOlusturView",
            "mulakatDavetView",
            "onDemandInterviewCreateView",
            "bilgiBankasiView",
            "userProfileView",
          ];
          viewIds.forEach(
            (id) => (activeViews[id] = document.getElementById(id))
          );
          const modalIds = [
            "cvModal",
            "disMulakatModal",
            "mulakatRaporModal",
            "mulakatChatModal",
            "yeniNotModal",
            "onDemandPreviewModal",
            "newDocumentModal",
            "shareProfileModal",
            "unifiedChatModal",
          ];
          modalIds.forEach(
            (id) => (activeViews[id] = document.getElementById(id))
          );

          attachEventListeners();

          document.getElementById("userCompanyName").textContent =
            DUMMY_DATA.companyName;
          document.getElementById("userMenuButton").textContent =
            DUMMY_DATA.user.initial;
          showView("loginView");
        }

        function attachEventListeners() {
          // Giriş ve Navigasyon
          document
            .getElementById("loginForm")
            .addEventListener("submit", (e) => {
              e.preventDefault();
              renderDashboard();
              renderAdayListesi();
              showView("dashboardView");
            });
          document
            .getElementById("userMenuButton")
            .addEventListener("click", (e) => {
              e.stopPropagation();
              document
                .getElementById("userMenuDropdown")
                .classList.toggle("hidden");
            });
          document.addEventListener("click", (e) => {
            if (!document.getElementById("userMenuButton").contains(e.target))
              document
                .getElementById("userMenuDropdown")
                .classList.add("hidden");
          });
          document
            .getElementById("logoutButton")
            .addEventListener("click", () => showView("loginView"));
          document
            .getElementById("navDashboard")
            .addEventListener("click", (e) => {
              e.preventDefault();
              renderDashboard();
              showView("dashboardView");
            });
          document
            .getElementById("navAdaylar")
            .addEventListener("click", (e) => {
              e.preventDefault();
              renderAdayListesi();
              showView("adayListView");
            });
          document
            .getElementById("navPozisyonlar")
            .addEventListener("click", (e) => {
              e.preventDefault();
              showView("pozisyonlarListView");
            });
          document
            .getElementById("navBilgiBankasi")
            .addEventListener("click", (e) => {
              e.preventDefault();
              renderBilgiBankasi();
              showView("bilgiBankasiView");
            });
          document
            .getElementById("navUserProfile")
            .addEventListener("click", (e) => {
              e.preventDefault();
              renderUserProfile();
              showView("userProfileView");
            });

          // Dashboard Butonları
          document
            .getElementById("goToAdaylarButton")
            ?.addEventListener("click", () => {
              renderAdayListesi();
              showView("adayListView");
            });
          document
            .getElementById("goToPozisyonlarButtonDashboard")
            ?.addEventListener("click", () => {
              showView("pozisyonlarListView");
            });

          // Aday Listesi ve Profil
          activeViews.adayListView.addEventListener("click", (e) => {
            const btn = e.target.closest(".view-aday-button");
            if (btn) {
              renderAdayProfili(btn.dataset.adayid);
              showView("adayProfilView");
            }
          });
          document
            .getElementById("adaySearchInput")
            ?.addEventListener("input", renderAdayListesi);
          document
            .getElementById("backToAdayListButton")
            .addEventListener("click", () => {
              renderAdayListesi();
              showView("adayListView");
            });

          // Aday Profili Sekmeleri ve Butonları
          activeViews.adayProfilView
            .querySelectorAll(".profil-tab")
            .forEach((tab) =>
              tab.addEventListener("click", (e) => {
                activeViews.adayProfilView
                  .querySelectorAll(".profil-tab")
                  .forEach((t) => t.classList.remove("active"));
                e.currentTarget.classList.add("active");
                activeViews.adayProfilView
                  .querySelectorAll(".profil-tab-content")
                  .forEach((tc) => tc.classList.add("hidden"));
                document
                  .getElementById(`tabContent_${e.currentTarget.dataset.tab}`)
                  .classList.remove("hidden");
              })
            );
          document
            .getElementById("cvGoruntuleButton")
            .addEventListener("click", () => {
              document.getElementById("cvModalContent").textContent =
                getCandidateById(currentAdayId).cvText;
              openModal(activeViews.cvModal);
            });
          document
            .getElementById("openUnifiedChatButton")
            .addEventListener("click", openUnifiedChat);
          document
            .getElementById("shareProfileButton")
            .addEventListener("click", openShareProfileModal);
          document
            .getElementById("notesLogsAccordionHeader")
            .addEventListener("click", (e) => {
              document
                .getElementById("notesLogsAccordionContent")
                .classList.toggle("open");
              e.currentTarget
                .querySelector("i")
                .classList.toggle("fa-chevron-down");
              e.currentTarget
                .querySelector("i")
                .classList.toggle("fa-chevron-up");
            });
          document
            .getElementById("addCandidateNoteBtn")
            .addEventListener("click", () => {
              const text = document.getElementById("newCandidateNote").value;
              if (text.trim()) {
                const aday = getCandidateById(currentAdayId);
                aday.notes.push({
                  user: DUMMY_DATA.user.name,
                  timestamp: new Date().toLocaleDateString("tr-TR"),
                  text: text.trim(),
                });
                renderNotesAndLogs(aday);
                document.getElementById("newCandidateNote").value = "";
              }
            });

          // Mülakat Butonları
          document
            .getElementById("createOnDemandInterviewButton")
            .addEventListener("click", () => {
              initOnDemandScreen();
              showView("onDemandInterviewCreateView");
            });
          document
            .getElementById("backToProfileFromOnDemand")
            .addEventListener("click", () => {
              showView("adayProfilView");
            });

          // Bilgi Bankası
          document
            .getElementById("openNewDocumentModalButton")
            .addEventListener("click", () =>
              openModal(activeViews.newDocumentModal)
            );
          document
            .getElementById("newDocumentForm")
            .addEventListener("submit", (e) => {
              e.preventDefault();
              alert("Yeni doküman eklendi (simülasyon).");
              closeModal(activeViews.newDocumentModal);
            });

          // Modallar
          document
            .querySelectorAll(".modal .close-button")
            .forEach((btn) =>
              btn.addEventListener("click", (e) =>
                closeModal(e.target.closest(".modal"))
              )
            );
          document.querySelectorAll(".modal").forEach((modal) =>
            modal.addEventListener("click", (e) => {
              if (e.target === modal) closeModal(modal);
            })
          );

          // Paylaşım Modalı
          document
            .getElementById("shareProfileForm")
            .addEventListener("submit", (e) => {
              e.preventDefault();
              document.getElementById("generatedLink").value = `${
                window.location.href.split("?")[0]
              }?shareId=${crypto.randomUUID().slice(0, 8)}`;
              document
                .getElementById("generatedLinkContainer")
                .classList.remove("hidden");
            });
          document
            .getElementById("copyLinkButton")
            .addEventListener("click", () => {
              navigator.clipboard.writeText(
                document.getElementById("generatedLink").value
              );
              alert("Link kopyalandı!");
            });

          // Birleşik Sohbet
          document
            .getElementById("unifiedChatSend")
            .addEventListener("click", () => handleUnifiedChatSend());
          document
            .getElementById("unifiedChatInput")
            .addEventListener("keypress", (e) => {
              if (e.key === "Enter") handleUnifiedChatSend();
            });
          activeViews.unifiedChatModal.addEventListener("click", (e) => {
            if (e.target.classList.contains("chat-suggestion-button"))
              handleUnifiedChatSend(e.target.textContent);
          });
        }

        initApp();
      });
    </script>
  </body>
</html>
